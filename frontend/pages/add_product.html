<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Add New Product</title>
  </head>
  <body>
    <main class="catalog">
      <div class="pattern-context">
        <strong>Pattern: Builder & Factory (Creational)</strong>
        <p>
          This simulates constructing a product. Entering a CPU triggers the
          Complex Product Builder, applying a price markup. Simple products use
          a basic factory approach.
        </p>
      </div>
      <h2>2. Add New Product (Builder/Factory)</h2>

      <!-- DEBUG BUTONU -->
      <div
        style="
          margin-bottom: 15px;
          padding: 10px;
          background-color: #fff3cd;
          border: 1px solid #ffc107;
          border-radius: 5px;
        "
      >
        <button
          onclick="window.initializeSampleData()"
          style="
            background-color: #ff9800;
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
          "
        >
          ğŸ”§ Initialize Sample Data
        </button>
        <p style="margin-top: 5px; color: #666; font-size: 12px">
          Click if dropdown is empty (runs once)
        </p>
      </div>

      <!-- HiyerarÅŸik Kategori SeÃ§imi -->
      <div
        style="
          margin-bottom: 20px;
          padding: 15px;
          background-color: #f8f9fa;
          border-radius: 5px;
        "
      >
        <h4>ğŸ“ Select Category:</h4>

        <!-- âœ… SADECE ANA KATEGORÄ° DROPDOWN'I KALACAK -->
        <label for="parent-category"><strong>Parent Category:</strong></label>
        <select
          id="parent-category"
          onchange="window.loadSubcategories()"
          style="
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            font-size: 14px;
          "
        >
          <option value="">-- Select a Category --</option>
        </select>

        <!-- âŒ GEREKSIZ DROPDOWN KALDIRILDI (sub-category) -->
        <!-- Dinamik dropdown'lar JavaScript tarafÄ±ndan eklenecek -->

        <!-- SeÃ§ilen Yol GÃ¶sterimi -->
        <p style="color: #666; font-weight: bold; margin: 10px 0">
          ğŸ“ Selected Path:
          <span id="selected-path" style="color: #0066cc"
            >Not selected yet</span
          >
        </p>
      </div>

      <!-- ÃœrÃ¼n Bilgileri -->
      <label for="prod-name"><strong>Product Name:</strong></label>
      <input type="text" id="prod-name" placeholder="E.g., Smart Watch" />

      <label for="prod-price"><strong>Base Price ($):</strong></label>
      <input type="number" id="prod-price" placeholder="199.99" step="0.01" />

      <label for="prod-stock"><strong>Stock:</strong></label>
      <input type="number" id="prod-stock" placeholder="25" />

      <!-- Builder Features -->
      <div
        style="margin-top: 20px; border-top: 1px solid #eee; padding-top: 10px"
      >
        <h4>Builder Features (Optional)</h4>
        <label for="prod-cpu"
          ><strong>CPU (For Complex Products Only):</strong></label
        >
        <input
          type="text"
          id="prod-cpu"
          placeholder="E.g., i7 (Triggers Builder)"
        />

        <label for="prod-ram"><strong>RAM (GB):</strong></label>
        <input type="number" id="prod-ram" placeholder="16" />
      </div>

      <button
        class="menu-button"
        style="
          background-color: #28a745;
          color: white;
          margin-top: 20px;
          padding: 10px 20px;
          border: none;
          border-radius: 5px;
          cursor: pointer;
          font-size: 16px;
        "
        onclick="window.simulateAddProduct()"
      >
        âœ… Add Product (Simulate)
      </button>
    </main>

    <script>
      // ğŸš¨ KRÄ°TÄ°K DÃœZELTME: GÃ¼venli yÃ¼kleme mekanizmasÄ± (add_product.js iÃ§indeki attemptLoadParentCategories fonksiyonuna gÃ¼veniyoruz)
      function attemptFinalLoad() {
        if (typeof window.loadParentCategories === "function") {
          window.loadParentCategories();
        } else {
          setTimeout(attemptFinalLoad, 100);
        }
      }
      setTimeout(attemptFinalLoad, 200);
    </script>
  </body>
</html>
